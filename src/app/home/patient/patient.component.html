<div class="container-fluid">
    <div class="row">
       <div class="col-lg-4">
          <div class="iq-card iq-user-profile-block">
             <div class="iq-card-body">
                <div class="user-details-block">
                   <div class="user-profile text-center">
                      <img src="assets/images/user/11.png" alt="profile-img" class="avatar-130 img-fluid">
                   </div>
                   <div class="text-center mt-3">
                      <h4><b>{{patient.nom}} {{patient.prenom}}</b></h4>
                      <p> Adresse:  {{patient.adresse}}</p>
                      <p>Date de naissance : {{patient.dateNaissance}}</p>
                      <p> Numéro de Téléphone: {{patient.telephone}}</p>
                      <p> Numéro CIN: {{patient.cin}}</p>
 <div  >
                           <qr-code [value]="id" [size]="100"></qr-code>
                       </div>
                       <div> <button class="btn btn-outline-link rounded-pill mb-3"(click)="print()">Imprimer QRCode</button>
                        </div>
                   </div>
                </div>
             </div>
          </div>
     

<!--espace qr code pour l print-->
 <div hidden  id="print-section" >
 <div class="container-fluid"> 
    <div class="row mb-12"  *ngFor="let i of nb ">
      <div class="iq-card"  >
         <div class="iq-card-body text-center">
            <hr>
               <qr-code   [value]="id" [size]="100"></qr-code>
           
             <hr>
               
         </div>
      </div>
   </div></div>
  
  
 

</div>
<!--espace qr code pour l print-->

       </div>
       <div class="col-lg-8">
          <div class="iq-card">
             <div class="iq-card-body pb-0">
                <div class="row">
                   <div class="col-sm-12">
                      <div class="iq-card">
                         <div class="iq-card-body bg-primary rounded pt-2 pb-2 pr-2">
                               <p class="mb-0 text-center">***  Dossier Médical  ***</p>
                              
                         </div>
                      </div>
                      <div class="col-lg-12">
                        <div class="iq-card-header d-flex justify-content-between p-0 bg-white">
                           <div class="iq-header-title">
                              <h5 class="card-title text-primary">Information Générale</h5>
                           </div>
                           <div class="iq-card-header-toolbar d-flex align-items-center">
                             <div class="dropdown">
                                <span class="dropdown-toggle iq-bg-primary btn"  >
                                <i class="ri-add-line m-0 text-primary" data-toggle="modal" data-target="#exampleModalScrollable"  (click)="recupereInfoPatient(patient._id,patient.taille,patient.poids,patient.groupeSanguin,patient.allergie,patient.traitementEncours,patient.maladie,patient.tel1,patient.tel2)"></i>
                                </span>  
                             </div>
                          </div>
                     </div>
                  </div>
 <div class="iq-card-body pl-0 pr-0 pb-0">
   <div class="row">
        <div class="col-sm-12 ">
           <div class="alert alert-primary" role="alert">
              <div class="iq-alert-text"> 
               <dl class="row">
                  <dt class="col-sm-4">Taille</dt>
                  <dd class="col-sm-8">{{patient.taille}}cm</dd>
                  <dt class="col-sm-4">Poids</dt>
                  <dd class="col-sm-8">  {{patient.poids}}Kg </dd>

                <dt class="col-sm-4">Groupe Sanguin</dt>
                  <dd class="col-sm-8">{{patient.groupeSanguin}}</dd>
                  <dt class="col-sm-4 text-truncate">Allergies</dt>
                  <dd class="col-sm-8">{{patient.allergie}}</dd>
                  <dt class="col-sm-4">Traitement en cours</dt>
                  <dd class="col-sm-8">{{patient.traitementEncours}} </dd>
                  <dt class="col-sm-4">Maladies</dt>
                  <dd class="col-sm-8">{{patient.maladie}} </dd>
                  <dt class="col-sm-4">Numéro du proches</dt>
                  <dd class="col-sm-8">{{patient.tel1}}      *&*      {{patient.tel2}}</dd>
                  <!-- <dt class="col-sm-4">Numéro du proche 2</dt>
                  <dd class="col-sm-8"> </dd> -->
               </dl>
                 <!-- <div class="row col-lg-12">
                  <div class="col-lg-6 ">Taille : -------{{patient.taille}}cm-------   </div> 
                <div class="col-lg-6"> Poids : -------{{patient.poids}}Kg-------  </div></div>
             
                    <div>  Groupe Sanguin : -------{{patient.groupeSanguin}}-------  </div>
               
                 
                 <hr>
                 <div>Allergies : -------{{patient.allergie}}-------</div> 
                   <div>Traitement en cours : -{{patient.traitementEncours}}-</div> 
                 <div>Maladies  : --{{patient.maladie}}--</div>   

                
                 <hr>
                 <div class="row col-lg-12"></div>
                 <div class="col-lg-6"> Numéro du proche 1  : ---{{patient.tel1}}--</div>
                 <div class="col-lg-6">  Numéro du proche 2  : --{{patient.tel2}}---</div>  -->
                

              </div>
           </div>
          <!-- modal information général-->
          <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable" role="document">
               <div class="modal-content">
                  <div class="modal-header">
                     <h5 class="modal-title" id="exampleModalScrollableTitle">Ajouter informations générale</h5>
                     <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                     </button>
                  </div>
                  <div class="modal-body">
                     <form [formGroup]="patientForm">
                        <div class="row col-lg-12">
                            <div class="form-group col-lg-6">
                           <label >Taille</label>
                           <input type="number" class="form-control" formControlName="taille" placeholder="exemple :170" >
                        </div>
                        <div class="form-group col-lg-6">
                           <label >Poids</label>
                           <input type="number" class="form-control"formControlName="poids" placeholder=" exemple :67"  >
                        </div>
                        </div>
                       
                        <div class="form-group">
                           <label >Groupe sanguin</label>
                           <select class="form-control" formControlName="groupeSanguin" >
                              <option selected="" disabled="">ajouter le groupe sanguin du patient </option>
                              <option>A+</option>
                              <option>A-</option>
                              <option>B+</option>
                              <option>B-</option>
                              <option>AB+</option>
                              <option>AB-</option>
                              <option>O+</option>
                              <option>O-</option>

                           </select>
                        </div>
                        <div class="form-group">
                           <label >Allergies(s)</label>
                           <input type="text" class="form-control" formControlName="allergie" placeholder="veuillez mentionné ici les Allergies du patient s'il en a">
                        </div>
                        <div class="form-group">
                           <label>Maladie(s)</label>
                           <input type="text" class="form-control" formControlName="maladie"  placeholder="veuillez mentionné ici les maladies du patient s'il en a">
                        </div>
                        <div class="form-group">
                           <label >Traitement(s) en cours</label>
                           <textarea class="form-control" formControlName="traitementEncours" rows="1" placeholder="veuillez mentionné ici les maladie(s) du patient s'il en a"></textarea>
                        </div>
                        <div class="row col-lg-12">
                           <div class="form-group col-lg-6">
                           <label >Téléphone 1 </label>
                           <input type="tel" class="form-control" formControlName="tel1" value="(+216)-56353995">
                        </div>
                        <div class="form-group col-lg-6">
                           <label >Téléphone 2</label>
                           <input type="tel" class="form-control" formControlName="tel2" value="(+216)-56353995">
                        </div></div>
                        
                      
                     </form>
                  </div>
                  <div class="modal-footer">
                     <button type="reset" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
                     <button type="submit" class="btn btn-primary" (click)="ajoutInformationGeneral()">Enregistrer</button>
                  </div>
               </div>
            </div>
         </div>
     
   </div>
</div>
</div>
                   <div class="col-lg-12">
                    
                         <div class="iq-card-header d-flex justify-content-between p-0 bg-white">
                            <div class="iq-header-title">
                               <h5 class="card-title text-primary">Consultations</h5>
                            </div>
                            <div class="iq-card-header-toolbar d-flex align-items-center">
                              <div class="dropdown">
                                 <span class="dropdown-toggle iq-bg-primary btn"  >
                                 <i class="ri-add-line m-0 text-primary" data-target="#compose-email-popup" data-toggle="modal"></i>
                                 </span>
                                 
                              </div>
                             <!-- debut ajout modal -->

                             <div id="compose-email-popup" class="compose-popup modal modal-sticky-bottom-right modal-sticky-lg">
                              <div class="iq-card iq-border-radius-20 mb-0">
                                 <div class="iq-card-body">
                                    <div class="row align-items-center">
                                       <div class="col-md-12 mb-3">
                                          <h5 class="text-primary float-left"><i class="ri-pencil-fill"></i> Ajouter une consultation </h5>
                                          <button type="submit" class="float-right close-popup" data-dismiss="modal"><i class="ri-close-fill"></i></button>
                                       </div>
                                    </div>
                                    <form [formGroup]="consultationForm" class="email-form">
                                     
                                       <div class="form-group row">
                                          <label for="subject" class="col-sm-2 col-form-label">Diagnostique:</label>
                                          <div class="col-sm-10">
                                             <textarea class="textarea form-control" rows="1" formControlName="diagnostique" [ngClass]="{ 'is-invalid': submitted && f.diagnostique.errors }"></textarea>
                                             <div *ngIf="submitted && f.diagnostique.errors" class="invalid-feedback">
                                                <div *ngIf="f.diagnostique.errors.required">le champ est obligatoire</div>
                                              </div>
                                          </div>
                                       </div>
                                       <div class="form-group row">
                                          <label for="subject" class="col-sm-2 col-form-label">Traitement:</label>
                                          <div class="col-md-10">
                                             <textarea class="textarea form-control" rows="2" formControlName="traitement" [ngClass]="{ 'is-invalid': submitted && f.traitement.errors }"></textarea>
                                             <div *ngIf="submitted && f.traitement.errors" class="invalid-feedback">
                                                <div *ngIf="f.traitement.errors.required">le champ est obligatoire</div>
                                              </div>
                                          </div>
                                       </div>
                                       <div class="form-group row align-items-center compose-bottom pt-3 m-0">
                                          <div class="d-flex flex-grow-1 align-items-center">
                                             <div class="send-btn text-center">
                                                <button type="submit" class="btn btn-primary" (click)="ajouterConsultation()">Enregistrer</button>
                                             </div>
                                            
                                          </div>
                                          <div class="d-flex align-items-center">
                                            
                                          </div>
                                       </div>
                                    </form>
                                 </div>
                              </div>
                           </div>  
                           <!-- fin ajout modal -->
  
                        </div>    
                      </div>
                   </div>
                   <div  class="col-lg-12">
                      <table class="table mb-0 table-borderless table-box-shadow">
                     
                     <tbody>
                        <tr *ngFor="let i of consultations"> 
                           <td >{{i.date}}</td>
                           <td>
                              <div class="iq-card-header-toolbar d-flex align-items-center">
                                 <div class="dropdown col-lg-12">
                                    <span class="" id="dropdownMenuButton4" data-toggle="dropdown">
                                    <i class="">Actions</i>
                                    </span>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton4">
                                       <a class="dropdown-item" ><i class="ri-eye-fill mr-2"></i>Afficher</a>
                                       <a class="dropdown-item" (click)="supprimerConsultation(i._id)"><i class="ri-delete-bin-6-fill mr-2" ></i>Supprimer</a>
                                       <a class="dropdown-item" data-target="#exampleModalScrollable" data-toggle="modal" (click)="recupere(i._id,i.diagnostique,i.traitement,i.medecin,i.patient)"><i class="ri-pencil-fill mr-2" ></i>Modifier</a>
                                       <a class="dropdown-item" ><i class="ri-printer-fill mr-2"></i>Imprimer</a>
                                    </div>
                                 </div>
                                
                              </div>
                           </td>
                        </tr>
                        
                     </tbody>
                  </table></div>


                  <!-- debut edit modal-->
                  <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
                     <div class="modal-dialog modal-dialog-scrollable" role="document">
                        <div class="modal-content">
                           <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalScrollableTitle">Modifier Consultation</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                              </button>
                           </div>
                           <div class="modal-body">
                              <form [formGroup]="consultationForm" class="email-form">
                                     
                                 <div class="form-group ">
                                    <label for="subject" class="col-sm-2 col-form-label">Diagnostique:</label>
                                    <div class="col-sm-10">
                                       <textarea class="textarea form-control" rows="1" formControlName="diagnostique" [ngClass]="{ 'is-invalid': submitted && f.diagnostique.errors }"></textarea>
                                       <div *ngIf="submitted && f.diagnostique.errors" class="invalid-feedback">
                                          <div *ngIf="f.diagnostique.errors.required">le champ est obligatoire</div>
                                        </div>
                                    </div>
                                 </div>
                                 <div class="form-group ">
                                    <label for="exampleFormControlTextarea1">Traitement:</label>
                                    <div class="col-md-10">
                                       <textarea class="textarea form-control" rows="2" formControlName="traitement" [ngClass]="{ 'is-invalid': submitted && f.traitement.errors }"></textarea>
                                       <div *ngIf="submitted && f.traitement.errors" class="invalid-feedback">
                                          <div *ngIf="f.traitement.errors.required">le champ est obligatoire</div>
                                        </div>
                                    </div>
                                 </div>
                               
                              </form>
                           </div>
                           <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                              <button type="button" class="btn btn-primary" (click)="modiferConsultation()">Enregistrer Modification</button>
                           </div>
                        </div>
                     </div>
                  </div>
                   <!--  fin edit modal-->


                </div>
             </div>
          </div>
       </div>
    </div>
 </div>

